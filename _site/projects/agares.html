<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="/assets/css/style.css?v=8e34e282acb2cd964124eb60125f1bf9c948c591">
    <link rel="stylesheet" type="text/css" href="/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>agares | josiah ledbetter</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="agares" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Public Blog" />
<meta property="og:description" content="Public Blog" />
<meta property="og:site_name" content="josiah ledbetter" />
<script type="application/ld+json">
{"@type":"WebPage","headline":"agares","url":"/projects/agares.html","description":"Public Blog","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>agares</h1>
        </header>
        <section id="downloads" class="clearfix">
          
	
        </section>
        <hr>
        <section id="main_content">
          <h1 id="agares-a-multi-armed-demon">agares, a multi armed demon</h1>
<p>well, originally i don’t think the multi armed part was mentioned in the “list of demons” i found on the internet. now, though, agares is absolutely multi armed because I keep adding so much bullshit to this project.</p>

<ul>
  <li>sync my dot files. .emacs, bash, powershell, etc.</li>
  <li>configure windows devices. install software, some minor software configuration, remove windows bullshit.</li>
  <li>sync my keyboard config; this involves updating a .png as well as a folder of .json an .kll files to apply firmware to ergodox.</li>
  <li>house deployments for home projects</li>
</ul>

<p>Up next is configuring an Mac device, and then whatever else I get to throw at it.</p>

<h2 id="dot-file-sync">dot file sync</h2>
<p>I think I’m doing this poorly. So far all i’m really doing is configuring all devices <em>actual</em> dot files to load these <code class="highlighter-rouge">agares/</code> dotfiles.</p>

<ul>
  <li>powershell: make sure you don’t have powershell, vscode /ise, and pwsh.exe all looking for the same profile. you’ll hate yourself. split them up.</li>
  <li>.emacs: this is pretty straightforward unless you use more emacs features than me (easy to do). I leave in just a single .emacs file.</li>
  <li>.bashrc: there’s a complicated set of rules that determines, at least on mac, when different .bash* files get loaded. be careful that yours only loads when you want it</li>
  <li>.tmux: straight forward.</li>
  <li>conemu: i don’t have an elegant solve for this. I just import this file whenever I set up a new machine. there is likely a better way.</li>
</ul>

<h3 id="further-bashrc-info">further .bashrc info</h3>
<p>I found <a href="http://hayne.net/MacDev/Notes/unixFAQ.html#shellStartup">this</a> link very useful, quoted below:<br />
When a “login shell” starts up, it reads the file “/etc/profile” and then “~/.bash_profile” or “~/.bash_login” or “~/.profile” (whichever one exists - it only reads one of these, checking for them in the order mentioned).</p>

<p>When a “non-login shell” starts up, it reads the file “/etc/bashrc” and then the file “~/.bashrc”.</p>

<p>Note that when bash is invoked with the name “sh”, it tries to mimic the startup sequence of the Bourne shell (“sh”). In particular, a non-login shell invoked as “sh” does not read any dot files by default. See the bash man page for details.</p>

<p>What this means is that you don’t want to link or load the agares .bashrc file from .bashrc <em>necessarily</em>. It depends on your usage. you’ll likely wanna call it from .bash_profile instead, if you’re on a mac.</p>

<h2 id="configure-windows-devices">configure windows devices</h2>
<p>3rd party app install is all handled through chocolatey. this is a great / terrible tool for this. great because it actually exists (wonderful!). Terrible because of certain usability problems. some packages install very weirdly through. emacs, for instance; do you want emacs? or emacs64? Those are not just optimized for different cpus, but are actually different versions of emacs (24 vs 25) that have different features shipped natively.</p>

<h3 id="removing-windows-kruft">removing windows kruft</h3>
<p>windows, particularly windows10, now ships with a bunch of bullshit that no sane person wants on their fucking computer. fucking 3rd party games are my favorite. thanks msft, get the fuck out. I stole a bunch of functions from <a href="https://gist.github.com/alirobe/7f3b34ad89a159e6daa1">this</a> gist (which stole them from another). I definitely recommend perusing powershell module file i made before running the functions therein. Some are easy wins, or simple “get started” features, like removing a game or unpinning stuff from the start menu. Some are more hit or miss, like disabling the windows store; great 90% of the time IME, but if you didn’t have WSL you <em>must</em> have the windows store or you can’t install it.</p>

<h3 id="a-note-on-hypervisors">a note on hypervisors</h3>
<p>i do a lot of work on hyper-v, especially recently, because there’s a great suite of automation tools that work natively on that platform. hyperv is a fine tool for many things, particularly home labbing, but far less useful as a “need to run second OS without dual boot” utility. If you need that you’ll likely need something like vmware workstation or virtualbox. the bad news is <em>you cannot have hyperv and another hypervisor active on the same machine at the same time</em>. hyperv blocks other hypervisors from working because its petty and rude (something about the way it operates does this. for more information on this check out <a href="https://superuser.com/questions/1208850/why-vitualbox-or-vmware-can-not-run-with-hyper-v-enabled-windows-10">this superuser answer</a>).</p>

<h2 id="keyboard-firmware-sync">keyboard firmware sync</h2>
<p>i use an <a href="https://www.massdrop.com/buy/infinity-ergodox">infinity ergodox</a> at home. this is a fun entry level diy project that taught me to solder (badly) and introduced me to QMK and TMK. I avoid having to dive very deep into those and instead use input.club’s online <a href="https://input.club/configurator-ergodox/">configurator tool</a>. i download the output and put them into the keyboard dir of <code class="highlighter-rouge">agares</code>, along with a screenshot of the configurator tool, so that I know how everything is <em>currently</em> configured. this helps especially early on when you’re tweaking the keymap every few days trying to remember “where the fuck did i put the _ sign??”.</p>

<p>Once that’s downloaded you still have to flash your ergodox. do yourself a favor and keep a “flash” keybinding easily accessible on both sides of your keyboard or you will hate yourself.</p>

<p>Some guides say you only need to flash one side of the keyboard as long as they are plugged into each other. That has never worked for me and I <em>must</em> flash both sides or the keymap will be incorrect.</p>

<h3 id="flashing-the-keyboard-on-windows">flashing the keyboard on windows</h3>
<p>i absolutely can not get this to work unless i’m running a linux guest in virtualbox. instead, I flash from a mac or other *nix computer because its just hilariously easy and I don’t have to fuck with loading a new driver first. sorry for this terrible answer, but for the infinity ergodox this is literally the easiest way. if anyone knows one for the love of god please <a href="mailto:me@jowj.net">email me</a>.</p>

<h3 id="flashing-the-keyboard-on-nix">flashing the keyboard on *nix</h3>
<p><a href="https://www.reddit.com/r/MechanicalKeyboards/comments/5bjtt8/guide_infinity_ergodox_linux_guide_modifying/">read this here poast</a></p>

<h2 id="deployments-for-home-projects">deployments for home projects</h2>
<p>right now this is really just a spot for my deployment of <code class="highlighter-rouge">mojojojo-bot</code>, my slackbot. you can read more about it (in an out of date blog post) <a href="/blogposts/mojojojo-bot.md">here</a>.</p>

<p>I deploy it using ansible targeting one of my few docker hosts. right now those are all local. eventually, i hope to build out a spot, or a deployment mechanism, for pushing it to Azure or AWS. I call <code class="highlighter-rouge">mojo.yml</code> with ansible-playbook, referencing a custom inventory file of <code class="highlighter-rouge">hosts.yml</code>, with <code class="highlighter-rouge">--ask-vault-pass</code> to prompt for password to decrypt <code class="highlighter-rouge">mojo-vault-vars.yml</code>, containing the slack-bot API token. this allows me to sync the actual API token via github, encrypted, without worrying about everyone and their dog fucking with my slack server.</p>

        </section>

        <footer>
        
        </footer>

      </div>
    </div>

    
  </body>
</html>
